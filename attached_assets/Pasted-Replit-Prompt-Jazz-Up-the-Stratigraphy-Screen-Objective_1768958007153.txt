Replit Prompt: Jazz Up the Stratigraphy Screen!

Objective: Make the "What's Under My Feet?" screen more engaging and educational by adding historical context markers (like the K-T boundary), tappable layers that reveal "fun facts," and a timeline indicating major geological eras.

1. The Problem

The current screen is scientifically accurate but static. It shows a list of rock layers without telling the story of what they mean. We need to add:

â€¢
Context: Where do dinosaurs fit in? What was this location like millions of years ago?

â€¢
Interactivity: Users should be able to tap a layer to learn more.

â€¢
Visual Storytelling: Key historical moments (like the dinosaur extinction) should be highlighted.

2. The Solution: A 3-Part Enhancement

Part 1: Add a Tappable Modal for "Fun Facts"

First, make each layer interactive. When a user taps a layer, it should open a modal with a fun, easy-to-understand description of that layer's environment.

A. Wrap Layers in TouchableOpacity:
In your component that renders the layers, wrap the main View for each layer in a TouchableOpacity and add an onPress handler.

JavaScript


// Inside your layer mapping function
<TouchableOpacity onPress={() => openLayerModal(layer)}>
  {/* ... your existing GeologicalLayer component ... */}
</TouchableOpacity>


B. Create the Modal State:
Use state to manage the modal's visibility and which layer is selected.

JavaScript


const [modalVisible, setModalVisible] = useState(false);
const [selectedLayer, setSelectedLayer] = useState(null);

const openLayerModal = (layer) => {
  setSelectedLayer(layer);
  setModalVisible(true);
};


C. Implement the Modal with a "Fun Fact" Generator:
Use a library like react-native-modal. The content of the modal will be a "fun fact" generated by a new function that calls an AI model.

JavaScript


// In a new file, e.g., 'api/openAI.js'
async function generateFunFact(layer) {
  const prompt = `You are a geology guide for a mobile app. For the geological formation "${layer.name}" (${layer.lithology}) from the ${layer.t_age} to ${layer.b_age} million years ago, describe what the environment was like in one short, engaging paragraph for a 2nd-grade reading level. Was it a beach, a deep sea, a river delta, a field of volcanoes? Start with a catchy phrase. Example: 'Imagine a shallow, tropical sea!'`;

  // Make API call to OpenAI with the prompt
  const response = await openai.completions.create({
    model: 'gpt-4.1-mini',
    prompt: prompt,
    max_tokens: 100,
  });
  return response.choices[0].text.trim();
}

// In your modal component
<Modal isVisible={modalVisible}>
  <View style={styles.modalContent}>
    <Text style={styles.modalTitle}>{selectedLayer?.name}</Text>
    <Text style={styles.modalFunFact}>{/* Display generated fun fact here */}</Text>
    <Button title="Close" onPress={() => setModalVisible(false)} />
  </View>
</Modal>


Part 2: Add the K-T Boundary Marker

The K-T Boundary (Cretaceous-Paleogene extinction event) is at ~66 million years ago (Ma). We need to render a special line on the chart where this event occurs.

A. Find the K-T Layer:
In your main component, after fetching the layer data, find which layer contains the 66 Ma mark.

JavaScript


const ktBoundaryAge = 66;
const ktLayerIndex = layers.findIndex(layer => ktBoundaryAge >= layer.t_age && ktBoundaryAge <= layer.b_age);


B. Calculate the Marker's Position:
If a K-T layer is found, calculate the vertical position of the marker within that layer.

JavaScript


let ktMarkerPosition = null;
if (ktLayerIndex !== -1) {
  const layer = layers[ktLayerIndex];
  const layerTopDepth = /* get top depth of this layer */;
  const layerHeight = /* get pixel height of this layer */;
  
  const ageRange = layer.b_age - layer.t_age;
  const ktAgePosition = (ktBoundaryAge - layer.t_age) / ageRange;
  ktMarkerPosition = layerTopDepth + (ktAgePosition * layerHeight);
}


C. Render the Marker:
Render a distinct, labeled line at the calculated position. This can be an absolutely positioned View.

JavaScript


{ktMarkerPosition !== null && (
  <View style={{ position: 'absolute', top: ktMarkerPosition, width: '100%', flexDirection: 'row', alignItems: 'center' }}>
    <View style={{ flex: 1, height: 2, backgroundColor: '#FFD700' }} />
    <Text style={{ color: '#FFD700', paddingHorizontal: 5 }}>ðŸ¦• K-T Boundary (Dinosaur Extinction)</Text>
  </View>
)}


Part 3: Add a Geological Era Timeline

Add a simple timeline on the side of the chart to give users context for the major geological eras (Cenozoic, Mesozoic).

A. Define Eras:
Create a simple configuration for the eras and their age ranges.

JavaScript


const eras = [
  { name: 'Cenozoic (Age of Mammals)', start: 0, end: 66 },
  { name: 'Mesozoic (Age of Dinosaurs)', start: 66, end: 252 },
  // ... add more if needed
];


B. Create a Timeline Component:
Create a new component that takes the total depth and the era data and renders a vertical bar with labels.

JavaScript


// Simplified Example
const EraTimeline = ({ totalDepth, eras }) => {
  const totalAge = /* max age from your layers */;
  return (
    <View style={{ position: 'absolute', right: 0, top: 0, bottom: 0, width: 80 }}>
      {eras.map(era => {
        const eraHeight = (era.end - era.start) / totalAge * 100 + '%';
        const eraTop = (era.start / totalAge) * 100 + '%';
        return (
          <View key={era.name} style={{ position: 'absolute', top: eraTop, height: eraHeight, width: '100%', backgroundColor: 'rgba(255,255,255,0.1)', borderWidth: 1, borderColor: '#FFF' }}>
            <Text style={{ transform: [{ rotate: '90deg' }] }}>{era.name}</Text>
          </View>
        );
      })}
    </View>
  );
};


Expected Outcome

1.
Interactive Layers: Each layer can be tapped to open a modal.

2.
Engaging Content: The modal shows a fun, easy-to-read fact about the layer's ancient environment.

3.
Historical Context: A bright yellow line clearly marks the dinosaur extinction event.

4.
Timeline View: A vertical bar on the side shows which layers belong to the "Age of Mammals" vs. the "Age of Dinosaurs", providing instant context.

